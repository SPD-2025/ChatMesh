<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Arquitetura ChatMesh - Projeto SPD</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap e FontAwesome -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    body {
      background: #f8f9fa;
    }
    .node {
      border-left: 5px solid #0d6efd;
      border-radius: 0.5rem;
      background: #fff;
      padding: 1.5rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      margin-bottom: 2rem;
      transition: transform 0.2s;
    }
    .node:hover {
      transform: scale(1.02);
    }
    .connection-arrow {
      font-size: 1.5rem;
      color: #0d6efd;
    }
    .tech {
      font-size: 0.85rem;
      background: #e2e6ea;
      border-radius: 0.25rem;
      padding: 0.25rem 0.5rem;
      margin: 0.2rem;
    }
    .section-title {
      margin-top: 3rem;
      margin-bottom: 1rem;
    }
    .infra {
      font-size: 0.95rem;
    }
  </style>
</head>
<body class="container py-5">

  <h2 class="mb-4 text-center"><i class="fas fa-network-wired me-2"></i>Arquitetura do Projeto: <strong>ChatMesh</strong></h2>

  <p class="text-center text-muted mb-5">Sistema distribuído de chat com comunicação ponto-a-ponto (P2P), replicação e sincronização de mensagens entre múltiplos peers.</p>

  <div class="row justify-content-center text-center">
    <div class="col-md-3 node">
      <h5>
        <i class="fas fa-sync-alt text-success"></i> 
        <i class="fas fa-redo text-warning"></i>
        Peer 1
    </h5>
      <p>Sincronizador<br>Recebe Mensagens Anteriores</p>
      <div class="d-flex justify-content-center flex-wrap">
        
        <span class="tech"><i class="fas fa-clock"></i> Sincronização</span>
        <span class="tech"><i class="fas fa-link"></i> Reconexão</span>        
        <span class="tech"><i class="fas fa-file-alt"></i> Log Local</span>
      </div>
    </div>

    <div class="col-md-1 d-flex align-items-center justify-content-center">
      <i class="fas fa-arrow-right connection-arrow"></i>
    </div>

    <div class="col-md-3 node">
      <h5>
        <i class="fas fa-sync-alt text-success"></i> 
        <i class="fas fa-redo text-warning"></i>
    </h5>
      <p>Sincronizador<br>Recebe Mensagens Anteriores</p>
      <div class="d-flex justify-content-center flex-wrap">
        <span class="tech"><i class="fas fa-clock"></i> Sincronização</span>
        <span class="tech"><i class="fas fa-link"></i> Reconexão</span>
        <span class="tech"><i class="fas fa-file-alt"></i> Log Local</span>
      </div>
    </div>

    <div class="col-md-1 d-flex align-items-center justify-content-center">
      <i class="fas fa-arrow-right connection-arrow"></i>
    </div>

    <div class="col-md-3 node">
      <h5>
        <i class="fas fa-sync-alt text-success"></i> 
        <i class="fas fa-redo text-warning"></i>
         Peer 3
        </h5>
      <p>Sincronizador<br>Recebe Mensagens Anteriores</p>
      <div class="d-flex justify-content-center flex-wrap">
                <span class="tech"><i class="fas fa-clock"></i> Sincronização</span>
        <span class="tech"><i class="fas fa-link"></i> Reconexão</span>
        <span class="tech"><i class="fas fa-file-alt"></i> Log Local</span>
      </div>
    </div>
  </div>

  <div class="text-center section-title">
    <h4><i class="fas fa-layer-group"></i> Estrutura e Arquitetura</h4>
    <p class="text-muted mb-2">Baseada em rede mesh com comunicação descentralizada</p>
    <div class="d-flex justify-content-center flex-wrap">
        <span class="tech"><i class="fab fa-python"></i> Python</span>
      <span class="tech"><i class="fas fa-project-diagram"></i> P2P Full Mesh</span>
      <span class="tech"><i class="fas fa-heartbeat"></i> Tolerância a Falhas</span>
      <span class="tech"><i class="fas fa-terminal"></i> Socket TCP</span>
      <span class="tech"><i class="fas fa-cogs"></i> Threads/Multiprocessing</span>
      <span class="tech"><i class="fas fa-server"></i> Docker Containers</span>
      <span class="tech"><i class="fas fa-network-wired"></i> Rede Virtual Docker</span>
    </div>
  </div>  

  <div class="text-center section-title">
    <h4><i class="fas fa-project-diagram"></i> Fluxograma da Arquitetura P2P</h4>
    <div class="mermaid text-start" style="background: #ffffff; border: 1px solid #dee2e6; padding: 0.5rem; border-radius: 0.5rem;">
      graph TD
    subgraph Peer_1 [Peer 1]
        A1[Sincronizador<br>Recebe Mensagens Anteriores]
        A2[Interface Terminal<br/>Envio de Mensagens]
        A3[Log Local]
    end

    subgraph Peer_2 [Peer 2]
        B1[Sincronizador<br>Recebe Mensagens Anteriores]
        B2[Interface Terminal<br/>Envio de Mensagens]
        B3[Log Local]
        
    end

    subgraph Peer_3 [Peer 3]
        C1[Sincronizador<br>Recebe Mensagens Anteriores]
        C2[Interface Terminal<br/>Envio de Mensagens]
        C3[Log Local]
    end
    %% Sincronizações
    A1 --> B1
    B1 --> A1

    B1 --> C1
    C1 --> B1

    A1 --> C1
    C1 --> A1

    %% Comunicação entre peers (Mesh)
    A2 --> B2
    A2 --> C2

    B2 --> A2
    B2 --> C2

    C2 --> A2
    C2 --> B2

    %% Logs locais
    A2 --> A3
    B2 --> B3
    C2 --> C3
    </div>
  </div>

  <div class="text-center section-title">
    <h5 class="text-muted"><i class="fas fa-bolt"></i> Suporte a escalabilidade horizontal e sincronização ponto-a-ponto entre nós</h5>
  </div>

  <!-- Mermaid.js CDN -->
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script>
</body>
</html>
